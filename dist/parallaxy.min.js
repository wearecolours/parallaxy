var Parallaxy=function(){function a(){return this.allElements=[],this.init=function(){this.createElements()},this.createElements=function(){for(var a,b,c=document.querySelectorAll("[data-parallaxy]"),d=0,e=c.length;e>d;d++)b=document.createElement("IMG"),a=document.createElement("DIV"),a.className="parallaxy",a.setAttribute("count",d),a.appendChild(b),c[d].appendChild(a),this.allElements[d]={el:c[d],img:b,div:a,loaded:!1,speed:null===c[d].getAttribute("data-parallaxy-speed")?.25:parseFloat(c[d].getAttribute("data-parallaxy-speed")),scaled:0},b.src=c[d].getAttribute("data-parallaxy-image"),b.addEventListener("load",this.loadedImage.bind(this,d))},this.loadedImage=function(a){this.allElements[a].loaded=!0,this.allElements[a].image_width=this.allElements[a].img.naturalWidth,this.allElements[a].image_height=this.allElements[a].img.naturalHeight,this.allElements[a].img.className="loaded",this.updateSize(),this.updateScroll()},this.update=function(){this.updateSize(),this.updateScroll()},this.updateSize=function(){for(var a=0,b=this.allElements.length;b>a;a++)if(this.allElements[a].loaded){var c=(window.innerHeight+this.allElements[a].el.offsetHeight)*(1-this.allElements[a].speed)+this.allElements[a].el.offsetHeight,d=c/this.allElements[a].image_height;this.allElements[a].scaled=Math.max(this.allElements[a].el.offsetWidth/this.allElements[a].image_width,d)}},this.updateScroll=function(){for(var a=0,b=this.allElements.length;b>a;a++)if(this.allElements[a].loaded){var c=this.allElements[a].scaled*this.allElements[a].image_height,d="translate("+c+", -50%) scale("+this.allElements[a].scaled+")";this.allElements[a].img.style.webkitTransform=this.allElements[a].img.style.MozTransform=this.allElements[a].img.style.msTransform=this.allElements[a].img.style.transform=d}},document.addEventListener("DOMContentLoaded",this.init.bind(this)),window.addEventListener("resize",this.update.bind(this)),this.prototype}return console.log("runds.."),new a}();console.log(Parallaxy);